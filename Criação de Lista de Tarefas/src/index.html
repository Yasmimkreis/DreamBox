<!DOCTYPE html>
    <!-- Define o tipo de documento como HTML5 -->
    <html lang="pt-BR">
    <!-- Define o idioma da p√°gina como portugu√™s brasileiro -->

    <head>
        <meta charset="UTF-8">
        <!-- Define a codifica√ß√£o de caracteres como UTF-8 (aceita acentos e caracteres especiais) -->

        <title>Lista de Tarefas</title>
        <!-- T√≠tulo da p√°gina exibido na aba do navegador -->

        <!--Manifest do PWA-->
        <link rel = "manifest" href="manisfest.json">
        <meta name="theme-color" content="#000000">

        <style>
            /* Estilo geral da p√°gina */
            body {
            font-family: Arial, sans-serif;
            background-color: rgb(50, 50, 255);
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;

            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            }

            /* Container central que envolve a lista */
            .container {
            background: #3675e49a;
            padding: 50px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            width: 70vw;
            }

            /* Estilo do t√≠tulo */

            h1{
                text-align: center;
                color: white;
                text-shadow: 2px 2px 2px black;
                margin-bottom: 15px;
                font-size: 70px;
            }
            h2 {
                text-align: center;
                font-size: 50px;
                color: white;
                text-shadow: 2px 2px 2px black;
                margin-bottom: 90px;
            }

            /* Campo de input onde o usu√°rio digita a tarefa */
            input {
            width: 95%;
            padding: 8px;
            border: 1px solid #000000;
            border-radius: 5px;
            font-size: 50px;
            }

            /* Bot√£o de adicionar tarefa */
            button {
            padding: 8px 12px;
            border: none;
            background: #063f94;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            align-content: center;
            font-size: 50px;
            
            }

            /* Lista de tarefas sem marcadores */
            ul {
            list-style: none;
            padding: 0;
            margin-top: 40px;
            }

            /* Estilo de cada item da lista */
            li {
            background: #f1f1f1;
            margin-bottom: 8px;
            padding: 8px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            }

            /* Estilo quando a tarefa est√° marcada como conclu√≠da */
            li.completed {
            text-decoration: line-through;
            color: rgb(0, 0, 0);
            }

            /* Bot√£o de deletar uma tarefa */
            .delete {
            background: red;
            border: none;
            color: white;
            padding: 5px 8px;
            border-radius: 5px;
            cursor: pointer;
            }
            .date-time {
            font-size: 18px;
            color: #444;
            }
        </style>
    </head>

    <body>
        <h1> DreamBox </h1>
        <div class="container">
            <!-- T√≠tulo principal da aplica√ß√£o -->
            <h2>üìå Lista de Tarefas</h2>

            <!-- Campo de texto para digitar a nova tarefa -->
            <input type="text" id="taskInput" placeholder="Digite uma tarefa">

            <!-- Campo de data -->
            <input type="date" id="dateInput">

            <!--Input para hor√°rio-->
            <input type="time" id="timeInput">

            <!-- Bot√£o que chama a fun√ß√£o addTask() ao ser clicado -->
            <button onclick="addTask()">Adicionar</button>

            <!-- Lista onde as tarefas ser√£o adicionadas dinamicamente -->
            <ul id="taskList"></ul>
        </div>

        <script>
            const taskInput = document.getElementById("taskInput");
            const taskList = document.getElementById("taskList");
            const timeInput = document.getElementById("timeInput");
            const dateInput = document.getElementById("dateInput");

            // Carregar tarefas ao abrir a p√°gina
            window.onload = loadTasks;

            // Fun√ß√£o para adicionar uma tarefa
            function addTask() {
            const taskText = taskInput.value.trim();
            const taskTime = timeInput.value;
            const taskDate = dateInput.value;

            if (taskText === "") {
            alert("Digite uma tarefa!");
            return;
            }

            // Valida√ß√£o simples do hor√°rio
           if (taskTime) {
            const [h, m] = taskTime.split(":").map(Number);
            if (h < 0 || h > 23 || m < 0 || m > 59) {
               alert("Hor√°rio inv√°lido! Use o formato HH:MM.");
                  return;
                }
            }

            // Cria item da lista
            const li = document.createElement("li");

            li.innerHTML = `
            <span onclick="toggleComplete(this)">
                ${taskText}
                ${taskDate ? ` - <strong class="date-time">üìÖ ${taskDate}</strong>` : ""}
                ${taskTime ? ` - <strong class="time">üïí ${taskTime}</strong>` : ""}
                </span>
                ${taskTime || taskDate ? `<button class="removeTime" onclick="removeDateTime(this)">üóëÔ∏è</button>` : ""}
                <button class="delete" onclick="deleteTask(this)">X</button>
            `;

            taskList.appendChild(li);
            saveTasks();

            // Limpa campos
            taskInput.value = "";
            timeInput.value = "";
            dateInput.value = "";
            }

            // Marcar / desmarcar como conclu√≠da
            function toggleComplete(element) {
                element.parentElement.classList.toggle("completed");
                    saveTasks();
            }

            // Deletar tarefa
            function deleteTask(button) {
                    button.parentElement.remove();
                saveTasks();
            }

            // Remover data e hora da tarefa
                function removeDateTime(button) {
                    const li = button.parentElement;
                    const dateEl = li.querySelector(".date-time");
                    const timeEl = li.querySelector(".time");
                    if (dateEl) dateEl.remove();
                    if (timeEl) timeEl.remove();
                    button.remove();
                    saveTasks();
            }

            // Salvar tarefas no localStorage
            function saveTasks() {
                    localStorage.setItem("tasks", taskList.innerHTML);
                }

            // Carregar tarefas do localStorage
            function loadTasks() {
                const data = localStorage.getItem("tasks");
                if (data) {
                    taskList.innerHTML = data;
                }
            }

            // Registrar o Service Worker
            if ("serviceWorker" in navigator) {
                navigator.serviceWorker.register("Service-worker.js")
                .then(() => console.log("Service Worker registrado"))
                .catch(err => console.log("Erro no SW:", err));
            }
        </script>
    </body>
</html>
